<mxfile host="app.diagrams.net" modified="2023-06-19T06:29:15.855Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36 Edg/114.0.1823.43" etag="RNonN9ZlDQWEvghteMS6" version="21.4.0" type="github">
  <diagram name="第 1 页" id="AkPrUvhRBGIo_sODVcCK">
    <mxGraphModel dx="1809" dy="1788" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="agxNZYJJnrSQmRL50gCt-22" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1250" y="-90" width="570" height="500" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-10" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-40" y="-20" width="910" height="470" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-1" value="Main" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="80" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="320" as="sourcePoint" />
            <mxPoint x="400" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-3" value="RunOptionsAndReturnExitCode" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="290" y="170" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="agxNZYJJnrSQmRL50gCt-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="330" y="230" as="sourcePoint" />
            <mxPoint x="330" y="260" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-5" value="ReadLine" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="150" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-6" value="getData" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="340" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-7" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-3" target="agxNZYJJnrSQmRL50gCt-6" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="280" as="sourcePoint" />
            <mxPoint x="610" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-8" value="WriteData" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="510" y="290" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-9" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.845;exitY=1.017;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-3" target="agxNZYJJnrSQmRL50gCt-8" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="650" y="220" as="sourcePoint" />
            <mxPoint x="700" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-11" value="Main" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1460" y="30" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-12" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-11" target="agxNZYJJnrSQmRL50gCt-13" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1780" y="150" as="sourcePoint" />
            <mxPoint x="1520" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-13" value="Connect" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1300" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-17" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="agxNZYJJnrSQmRL50gCt-18" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1519.66" y="90" as="sourcePoint" />
            <mxPoint x="1519.66" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-18" value="readData" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1460" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-20" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-11" target="agxNZYJJnrSQmRL50gCt-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1620" y="90" as="sourcePoint" />
            <mxPoint x="1620" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-21" value="HashSet" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1620" y="140" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-23" value="GameSever.Main" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1010" y="500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-24" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-23" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1180" y="670" as="sourcePoint" />
            <mxPoint x="1070" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-25" value="GameMain.Update" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1000" y="590" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-26" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-25" target="agxNZYJJnrSQmRL50gCt-27" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1180" y="760" as="sourcePoint" />
            <mxPoint x="1070" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-27" value="TimeInfo.Instance.Update" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="413" y="690" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-31" value="没注释，没太看懂" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="413" y="750" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-33" value="GameModel.Update" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="690" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-34" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-25" target="agxNZYJJnrSQmRL50gCt-33" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1080" y="730" as="sourcePoint" />
            <mxPoint x="1130" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-35" value="有一个单例队列_updates，每次dequeue取出来，如果已经被释放，则不放回队列。如果取出的不是ISingletonUpdate类型，也不放回队列。&lt;br&gt;如果以上两个if都没触发continue，则放回队列。然后调用其Update函数" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="640" y="750" width="140" height="180" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-36" value="GameNetervice.&lt;br&gt;UpdateService" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="827" y="690" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-37" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-25" target="agxNZYJJnrSQmRL50gCt-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1030" y="650" as="sourcePoint" />
            <mxPoint x="1260" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-38" value="被接口挡住了，内部逻辑没看见" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="827" y="750" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-39" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.465;entryY=0.006;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-25" target="agxNZYJJnrSQmRL50gCt-41" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1120" y="650" as="sourcePoint" />
            <mxPoint x="1330" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-41" value="GameModel.ActorHandle" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="690" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-43" value="先清空_log_protos，一个int的List，猜测是log协议，然后获取开始时间，设置AtomicBoolean的_value为1，具体作用不详，然后更新_queue_max_count，然后根据_max_process_msg选择处理消息模式，有1个，1/4，1/2，全部。然后开始处理msg。如果message是GameMessageClient类，在_log_protos中Add它的csProtoID，如果不是，则Add它的_protoID&lt;br&gt;然后再调用HandleMessage函数" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="750" width="140" height="360" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-44" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-43" target="agxNZYJJnrSQmRL50gCt-45" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1050" y="1110" as="sourcePoint" />
            <mxPoint x="980" y="1066" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-45" value="HandleMessage" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="1140" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-46" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-45" target="agxNZYJJnrSQmRL50gCt-49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1010" y="1310" as="sourcePoint" />
            <mxPoint x="1000" y="1240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-49" value="msg._rpc_id &amp;lt; 0 ?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="1238" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-50" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-49" target="agxNZYJJnrSQmRL50gCt-52" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="990" y="1390" as="sourcePoint" />
            <mxPoint x="990" y="1360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-51" value="Y" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1030" y="1318" width="30" height="30" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-52" value="CallMessageRet" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="1350" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-53" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1130" y="1278" as="sourcePoint" />
            <mxPoint x="1170" y="1277.8" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-54" value="_message_handle.&lt;br&gt;HandleMessage" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1170" y="1238" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-55" value="接口挡住了" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1170" y="1298" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-56" value="通过_rpc_id获得值sndmsg，然后看现在时间与sndmsg创建时间的差，大于600毫秒提示一个warning，然后给msg设置一个值" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="990" y="1410" width="140" height="120" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-70" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" target="agxNZYJJnrSQmRL50gCt-71" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1070" y="650" as="sourcePoint" />
            <mxPoint x="1200" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-71" value="GameActorManager.&lt;br&gt;Update" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1170" y="690" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="agxNZYJJnrSQmRL50gCt-72" value="获取当前server的时间，还有_timer_list队列的长度count，然后对count个数据进行遍历，每次从队列里尝试取出数据timeAction，如果该timeAction._timer大于当前server时间time_now，则把它放回_timer_list，否则调用SendMessage函数，然后将其放入_back_timer_list队列" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1170" y="750" width="140" height="210" as="geometry" />
        </mxCell>
        <mxCell id="EGltKX2aPdwIZXadGuva-1" value="GameTypeSystems.&lt;br&gt;Update" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1360" y="690" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="EGltKX2aPdwIZXadGuva-2" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.421;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryPerimeter=0;" parent="1" source="agxNZYJJnrSQmRL50gCt-25" target="EGltKX2aPdwIZXadGuva-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1140" y="630" as="sourcePoint" />
            <mxPoint x="1275" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="EGltKX2aPdwIZXadGuva-3" value="获取queue以及其长度count，然后遍历，每次Dequeue取得instanceID，然后通过_all_object的Get方法看是否能取得该ID对应的object，取不到或者该object已经被释放了则跳过。然后通过TypeSystem的_type_system_map的TryGetValue方法通过type给oneTypeSystems赋值，失败会返回null，&lt;br&gt;然后通过oneTypeSystems的_map的TryGetValue方法给List&amp;lt;object&amp;gt;systems赋值，成功赋值就返回systems，否则返回null" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1360" y="750" width="140" height="360" as="geometry" />
        </mxCell>
        <mxCell id="EGltKX2aPdwIZXadGuva-4" value="GMServerComponent" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="20" y="1710" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-1" value="GameSever.Main" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3060" y="280" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-2" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3119.4700000000003" y="340" as="sourcePoint" />
            <mxPoint x="3119.4700000000003" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-3" value="GameMain.Init" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3050" y="370" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-4" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-5" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1740" y="790" as="sourcePoint" />
            <mxPoint x="1600" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-5" value="GameModel.&lt;br&gt;AddSingletion" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="690" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-6" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-7" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1860" y="730" as="sourcePoint" />
            <mxPoint x="1720" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-7" value="Log.&lt;br&gt;SystemConsoleAndLogInfo" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2020" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-10" value="GameMain.ServerId" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2190" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-11" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-10" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2100" y="600" as="sourcePoint" />
            <mxPoint x="1880" y="760" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-16" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-10" target="MWC4nCh9BzGZ-LohU2af-17" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1920" y="820" as="sourcePoint" />
            <mxPoint x="1915" y="780" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-17" value="GameModel.ServerId" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2190" y="780" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-18" value="设置服务器ID" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2190" y="840" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-19" value="添加单例" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1880" y="750" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-20" value="GameMain.initActor" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2360" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-21" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-20" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1920" y="640" as="sourcePoint" />
            <mxPoint x="2325" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-24" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-25" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2100" y="600" as="sourcePoint" />
            <mxPoint x="2580" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-25" value="Instance.AddComponent" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2530" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-26" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-27" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2210" y="590" as="sourcePoint" />
            <mxPoint x="2750" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-27" value="GameServerLoader.&lt;br&gt;Instance.Reload" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2700" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-28" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-29" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2230" y="600" as="sourcePoint" />
            <mxPoint x="2920" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-29" value="GameModel._roter_actor?.&lt;br&gt;StartRouter" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-30" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-31" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2470" y="600" as="sourcePoint" />
            <mxPoint x="3090" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-31" value="GameModel._router_actor.&lt;br&gt;CheckAllReady" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3040" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-34" value="while循环的条件，一直调用，如果为false，将调用GameNetService.Instance.&lt;br&gt;UpDateService和GameModel._router_actor?.&lt;br&gt;ActorHandle，直到为true" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3040" y="750" width="150" height="120" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-35" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-36" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2690" y="650" as="sourcePoint" />
            <mxPoint x="3260" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-36" value="GameNetService.Instance.&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;UpDateService" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3210" y="690" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-38" value="GameModel._router_actor?.&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;&lt;span style=&quot;border-color: var(--border-color);&quot;&gt;ActorHandle&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3380" y="690" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-39" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-38" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2805" y="540" as="sourcePoint" />
            <mxPoint x="3380" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-40" value="GameActorManager.Instance.&lt;br&gt;RegisterOtherActorHandler" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3562" y="690" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-41" value="GameActorManager.Instance.&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;RegisterCenterHandler" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3740" y="690" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-42" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-40" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2880" y="570" as="sourcePoint" />
            <mxPoint x="3630" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-43" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2880" y="570" as="sourcePoint" />
            <mxPoint x="3812" y="690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-44" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-45" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3490" y="555" as="sourcePoint" />
            <mxPoint x="3973.157894736842" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-45" value="ActorThreadPool.Instance.&lt;br&gt;Start" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3920" y="690" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-46" value="GameActorManager.Instance.&lt;br&gt;RegisterAllActor" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="4100" y="690" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-47" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="MWC4nCh9BzGZ-LohU2af-3" target="MWC4nCh9BzGZ-LohU2af-46" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3020" y="390" as="sourcePoint" />
            <mxPoint x="4090" y="660" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-48" value="Log信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2020" y="750" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-50" value="ActorConfigData.Instance.&lt;br&gt;GetDict" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2360" y="1090" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-51" value="获取actor的config" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2360" y="1150" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-52" value="通过GetDict获取actor的config设置，config的属性有ID、serverID、ActorName和MsgType。&lt;br&gt;然后用foreach对每个actor遍历，通过serverID把actor加载到GameModel的_router_actor上。&lt;br&gt;通过一个Type数组，利用反射机制GetConstructor方法找到构造函数赋值给constructor，&lt;br&gt;然后利用constructor.invoke创建实例gactor，调用GameActorManager.&lt;br&gt;Instance.ADD把gactor添加到GameActorManager实例中" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2360" y="750" width="150" height="310" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-53" value="" style="endArrow=classic;html=1;rounded=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2434.47" y="1060" as="sourcePoint" />
            <mxPoint x="2434.47" y="1090" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-54" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" target="MWC4nCh9BzGZ-LohU2af-51" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2435" y="1260" as="sourcePoint" />
            <mxPoint x="2430" y="1220" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-55" value="Q：actor是用户吗&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2360" y="1260" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-56" value="如果_components不为空且已有了传入参数的Type，抛出错误。&lt;br&gt;创建一个新的GameEntity命名为component，将this的Id赋值，并将this设置为它的_current_parent，然后利用_type_system初始化component，如果this是IAddComponent类，再调用_type_system的AddComponent方法，添加component" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2530" y="750" width="150" height="220" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-57" value="大概就是加载一些东西" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2700" y="750" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-58" value="先获得ServerConfigData的字典，然后看字典里每个数据的Key是否和_server_id相同，相同将键值对(Key,1)加入_servers_con，不相同就把(Key,0)加入" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2870" y="750" width="150" height="130" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-59" value="更新NetService的信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3210" y="750" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="MWC4nCh9BzGZ-LohU2af-60" value="获取服务器时间赋值给time_start，把ActorManager的_run_flags[_actor_id]设为true，应该表示的是用户上线了，根据HandleMessageType的MessageType选择处理消息的方式——一个、1/4、1/2&lt;br&gt;然后用for循环遍历消息队列_message_queue，每次TryDequeue，然后调用HandleMessage处理消息&lt;br&gt;处理完了获取服务器时间赋值给time_end，计算time_cost，然后比较this的_queue_max_time_cost和time_cost，将两者更大的赋值的_queue_max_time_cost" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="3380" y="750" width="160" height="350" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-1" value="传入GameModel._router_actor的RouterOtherActor方法赋值给该Instance的&lt;br&gt;_handle_action属性" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3562" y="750" width="160" height="100" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-2" value="GameModel._router_actor.&lt;br&gt;RouterOtherActor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3561.5" y="880" width="158" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-3" value="传入id和要做的action，在_actors_cons里尝试通过actor_id来获得session_id，如果session_id不为0，并且msg是GameMessageClient类型，将其赋值给old_msg，新建一个new_msg，将原来的msg的_src_actor_id、_tar_actor_id、_rpc_id赋值给new_msg，然后将PlayerUid、csProtoId，_data通过SetLong、SetShort、Setbuffer赋值给new_msg，这一步是为了将其转换为小端（统一的，虽然网络字节用的大端），然后通过GameNetService.Instance.&lt;br&gt;SendMesage发送消息" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3561.5" y="940" width="158" height="280" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-4" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" target="GYn-868Fh-glP7cho3_U-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3640" y="850" as="sourcePoint" />
            <mxPoint x="3800" y="880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-5" value="传入GameModel._router_actor的RouterCenterActor方法赋值给该Instance的_handle_register_action属性" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3740" y="750" width="160" height="100" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-6" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3819.5" y="850" as="sourcePoint" />
            <mxPoint x="3820.5" y="880" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-7" value="GameModel._router_actor.&lt;br&gt;RouterCenterActor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3742" y="880" width="158" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-8" value="传入msg，把_center_actor_id赋值给msg的_tar_actor_id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3742" y="940" width="158" height="80" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-9" value="调用ServerEnv.Instance.&lt;br&gt;GetProgaramActorThreads方法获取线程数量传给Start，根据线程数量创建新的线程，传入的是GameActor.Instance.&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;ThreadRun方法" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3920" y="750" width="160" height="100" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-11" value="这里新创建的thread传的ThreadRun，里面GameActorManager.Instance&lt;br&gt;._reload_flag.Get()做的啥" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3920" y="1440" width="160" height="110" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-12" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="GYn-868Fh-glP7cho3_U-11">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="4010" y="1010" as="sourcePoint" />
            <mxPoint x="4000" y="1290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-13" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="GYn-868Fh-glP7cho3_U-9" target="GYn-868Fh-glP7cho3_U-14">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="3999.5" y="855" as="sourcePoint" />
            <mxPoint x="4000" y="885" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-14" value="GameActor.Instance.&lt;br&gt;ThreadRun" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3920" y="880" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-15" value="先通过GameActorManager.Instance.&lt;br&gt;_reload_flag.Get方法获取一个bool值，如果为true一直循环，然后调用GameActor.Instance.&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;RunInThread方法" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3920" y="940" width="160" height="130" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-17" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" target="GYn-868Fh-glP7cho3_U-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="4000" y="1070" as="sourcePoint" />
            <mxPoint x="4000" y="1105" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-18" value="GameActor.Instance.&lt;br&gt;RunInThread" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3920" y="1100" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="GYn-868Fh-glP7cho3_U-19" value="设置标志为false，添加读锁，获得_actor_queue的数量count，然后开始循环，每次尝试dequeue，对于dequeue出来的actor_id，尝试获得_actors里对应的GameActor对象赋值给slot，对比slot的_actor_id与dequeue出来的actor_id是否一样，如果一样再看slot的_message_queue是否count大于0，" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="3920" y="1160" width="160" height="250" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
